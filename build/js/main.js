function builBlock(t){localStorage.clear();var e=1,a=t.hits;pageContainer=document.body.getElementsByClassName("page-container")[0],a.map(function(t){var a=createNode("div");a.classList.add("row","row-pageContainer"),a.setAttribute("data-blockCount",e),e++;var o=[{textBnt:"Save"},{textBnt:"Approve"},{textBnt:"Decline"}],n=[],l=[{textCont:"Tags: ",linkCont:"tags"},{textCont:"Likes: ",linkCont:"likes"},{textCont:"Link: ",linkCont:"pageURL"}];createDeleteButton(n),createImg(t.userImageURL,n),createContent(t,l,n),createButtonsList(o,n),createCommentsBlock(n),pushContainers(n,a),append(pageContainer,a)}),controllersBtn(pageContainer,document.body),modalView(document.body)}function createNode(t){return document.createElement(t)}function createButtonsList(t,e){var a=createNode("div");a.classList.add("col-md-2");var o=createNode("ul");return t.map(function(t){var e=createNode("button");e.textContent=t.textBnt,e.classList.add("btn","btn-primary","btn-block");var a=createNode("li");append(a,e),append(o,a)}),append(a,o),e.push(a),a}function createImg(t,e){var a=createNode("div");a.classList.add("col-md-4","col-xs-12","col-sm-6");var o=createNode("img");return o.src=t,o.classList.add("img-responsive","img-circle","mx-auto"),append(a,o),e.push(a),a}function createContent(t,e,a){var o=createNode("div");return o.classList.add("col-md-5","col-xs-12","col-sm-6","text-left"),e.map(function(e){if("pageURL"==e.linkCont){var a=createNode("a");a.setAttribute("target","_blank"),a.href=t[e.linkCont],a.textContent=t[e.linkCont],append(o,a)}else{var n=createNode("p");n.innerHTML=e.textCont+t[e.linkCont],append(o,n)}}),a.push(o),o}function createDeleteButton(t){var e=createNode("div");e.classList.add("col-md-1","order-12","col-xs-2");var a=createNode("button");return a.textContent="X",a.classList.add("btn","btn-danger"),append(e,a),t.push(e),e}function createCommentsBlock(t){var e=createNode("div"),a=createNode("div"),o=createNode("div"),n=createNode("h4"),l=createNode("a"),s=createNode("span"),c=(createNode("label"),createNode("textarea")),r=createNode("input"),d=createNode("div"),i=createNode("button");e.classList.add("col-12","form-group"),d.classList.add("input-group"),a.classList.add("panel","panel-default"),n.classList.add("panel-heading"),n.textContent="Comments",o.classList.add("list-group"),l.classList.add("list-group-item","first-list-item"),l.textContent="Add your comments!",s.classList.add("badge"),s.textContent="3",i.classList.add("btn","btn-comment"),c.setAttribute("row","10"),c.classList.add("form-control"),r.classList.add("form-control"),i.textContent="Add comment",append(o,l),append(a,n),append(a,o),append(e,a),append(d,r),append(d,i),append(e,d),t.push(e)}function pushContainers(t,e){t.map(function(t){append(e,t)})}function updateLocalStorage(t,e){var a=findProperty(t.path,"row-pageContainer"),o=JSON.parse(localStorage.getItem("localObject"));o.blocksCount.splice(o.blocksCount.indexOf(t.path[a].attributes[1].value),1),localStorage.setItem("localObject",JSON.stringify(o));var n=e.getElementsByClassName("page-container")[0],l="div[data-blockCount='"+t.path[a].attributes[1].value+"']";n.querySelectorAll(l)[0].getElementsByClassName("btn-block")[0].innerText="Save"}function saveToLocalStorage(t){t.path[6].getElementsByTagName("body");t.path[0].innerText="Delete";var e=new Object;localStorage.localObject?localStorage.localObject&&(e=JSON.parse(localStorage.getItem("localObject"))):e={blocksCount:[]},e.blocksCount.push(t.path[4].attributes[1].value),localStorage.setItem("localObject",JSON.stringify(e))}function deleteFromLocalStorage(t){var e=findProperty(t.path,"row-pageContainer");t.path[0].innerText="Save";var a=JSON.parse(localStorage.getItem("localObject"));a.blocksCount.splice(a.blocksCount.indexOf(t.path[e].attributes[1].value),1),localStorage.setItem("localObject",JSON.stringify(a))}function deleteBlock(t){var e=findProperty(t.path,"row-pageContainer");t.path[e].remove()}function approveCtrl(t){var e=t.path[2].getElementsByTagName("button"),a=t.path[4].getElementsByTagName("p"),o=a[1].textContent.slice(6,9);e[1].setAttribute("disabled","disabled"),e[2].removeAttribute("disabled"),t.path[4].classList.add("blockliteGreen"),t.path[4].classList.remove("blockliteRed"),o++,a[1].innerHTML="Likes: "+o}function declineCtrl(t){var e=t.path[2].getElementsByTagName("button"),a=t.path[4].getElementsByTagName("p"),o=a[1].textContent.slice(6,9);e[2].setAttribute("disabled","disabled"),e[1].removeAttribute("disabled"),t.path[4].classList.add("blockliteRed"),t.path[4].classList.remove("blockliteGreen"),o--,a[1].innerHTML="Likes: "+o}function addComment(t){var e=findProperty(t.path,"row-pageContainer");if(""!=t.path[e].getElementsByClassName("form-control")[0].value){var a=t.path[2].childNodes[0].childNodes[1],o=createNode("a"),n=createNode("button"),l=createNode("button");l.textContent="Delete comment",l.classList.add("deleteBtn","btn"),n.classList.add("btn"),o.classList.add("list-group-item"),o.textContent=t.path[1].firstChild.value,append(o,l),t.path[1].firstChild.value="";try{t.path[2].childNodes[0].childNodes[1].childNodes[0].classList.contains("first-list-item")&&t.path[2].childNodes[0].childNodes[1].childNodes[0].remove()}catch(t){}a.appendChild(o)}else alert("Your comment is empty!")}function findProperty(t,e){for(var a in t)if(t[a].classList.contains(e))return a}window.getDataFromAPI=function(t){var e=new XMLHttpRequest;e.open("GET","https://pixabay.com/api/?key=2980920-46f1aa264b036ffc6e45ebad0&orientation=vertical&q=robot&min_height=500"),e.responseType="json",e.onload=function(){t(e.response)},e.send()},getDataFromAPI(builBlock),window.append=function(t,e){return t.appendChild(e)},window.controllersBtn=function(t,e){t.addEventListener("click",function(t){if(t.target.classList.contains("btn"))if("Approve"==t.target.textContent)approveCtrl(t);else if("Decline"==t.target.textContent)declineCtrl(t);else if("X"==t.target.textContent){try{updateLocalStorage(t,e)}catch(t){}deleteBlock(t)}else"Add comment"==t.target.textContent?addComment(t):"Delete comment"==t.target.textContent?t.path[1].remove():"Save"==t.target.textContent?saveToLocalStorage(t):"Delete"==t.target.textContent&&(t.path[5].classList.contains("modal-body")?t.path[0].setAttribute("disabled","disabled"):deleteFromLocalStorage(t));try{e.getElementsByClassName("modal-btn")[0].textContent="Launch modal "+JSON.parse(localStorage.getItem("localObject")).blocksCount.length}catch(t){console.log(t)}})},window.modalView=function(t){var e=t.getElementsByClassName("modal-btn");t.addEventListener("click",function(e){try{t.getElementsByClassName("modal-btn")[0].textContent="Launch modal "+JSON.parse(localStorage.getItem("localObject")).blocksCount.length}catch(t){}});var a=t.getElementsByClassName("modal-content")[0];e[0].addEventListener("click",function(e){t.getElementsByClassName("modal-body")[0];var o=JSON.parse(localStorage.getItem("localObject")),n=createNode("div");try{t.getElementsByClassName("modal-body")[0].remove()}catch(t){}n.classList.add("modal-body");try{0!=o.blocksCount.length?(o.blocksCount.map(function(e){var a="div[data-blockCount='"+e+"']",o=t.querySelectorAll(a)[0].cloneNode(!0);append(n,o)}),append(a,n),$("#modalView").modal("toggle")):alert("No saved blocks!")}catch(t){alert("No saved blocks!")}}),controllersBtn(a,t)};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiYnVpbEJsb2NrIiwiZGF0YSIsImxvY2FsU3RvcmFnZSIsImNsZWFyIiwiYmxvY2tDb3VudCIsImhpdHMiLCJwYWdlQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJib2R5IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsIm1hcCIsImRpdiIsImNyZWF0ZU5vZGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJidXR0b25zIiwidGV4dEJudCIsImNvbnRhaW5lcnMiLCJjb250ZW50IiwidGV4dENvbnQiLCJsaW5rQ29udCIsImNyZWF0ZURlbGV0ZUJ1dHRvbiIsImNyZWF0ZUltZyIsInVzZXJJbWFnZVVSTCIsImNyZWF0ZUNvbnRlbnQiLCJjcmVhdGVCdXR0b25zTGlzdCIsImNyZWF0ZUNvbW1lbnRzQmxvY2siLCJwdXNoQ29udGFpbmVycyIsImFwcGVuZCIsImNvbnRyb2xsZXJzQnRuIiwibW9kYWxWaWV3IiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjb250YWluZXIiLCJ1bCIsImJ0biIsInRleHRDb250ZW50IiwibGkiLCJwdXNoIiwiaW1nU3JjIiwiaW1nIiwic3JjIiwiY29udCIsImEiLCJocmVmIiwicCIsImlubmVySFRNTCIsInBhbmVsIiwicGFuZWxMaXN0IiwicGFuZWxIZWFkaW5nIiwicGFuZWxMaXN0SXRlbTEiLCJzcGFuIiwiY29tbWVudHNCb3giLCJjb21tZW50c0xpbmUiLCJpbnB1dEdyb3VwIiwiYnV0dG9uQWRkQ29tbWVudCIsInVwZGF0ZUxvY2FsU3RvcmFnZSIsImV2ZW50Iiwicm93UGFnZUNvbnRhaW5lciIsImZpbmRQcm9wZXJ0eSIsInBhdGgiLCJyZXRyaWV2ZWRPYmplY3QiLCJKU09OIiwicGFyc2UiLCJnZXRJdGVtIiwiYmxvY2tzQ291bnQiLCJzcGxpY2UiLCJpbmRleE9mIiwiYXR0cmlidXRlcyIsInZhbHVlIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInBhZ2VDb250YWluZXJUZW1wIiwicm93QXR0cmlidXRlTmFtZVRlbXAiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5uZXJUZXh0Iiwic2F2ZVRvTG9jYWxTdG9yYWdlIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJPYmplY3QiLCJsb2NhbE9iamVjdCIsImRlbGV0ZUZyb21Mb2NhbFN0b3JhZ2UiLCJkZWxldGVCbG9jayIsInJvd0luZGV4IiwicmVtb3ZlIiwiYXBwcm92ZUN0cmwiLCJwTGlrZXMiLCJsaWtlQ291bnQiLCJzbGljZSIsInJlbW92ZUF0dHJpYnV0ZSIsImRlY2xpbmVDdHJsIiwiYWRkQ29tbWVudCIsImxpc3RHcm91cCIsImNoaWxkTm9kZXMiLCJwYW5lbExpc3ROZXdJdGVtIiwiYnV0dG9uRGVsZXRlQ29tbWVudCIsImZpcnN0Q2hpbGQiLCJjb250YWlucyIsImUiLCJhcHBlbmRDaGlsZCIsImFsZXJ0Iiwib2JqIiwiZmluZENsYXNzIiwiaSIsIndpbmRvdyIsImdldERhdGFGcm9tQVBJIiwiY2FsbGJhY2siLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJyZXNwb25zZVR5cGUiLCJvbmxvYWQiLCJyZXNwb25zZSIsInNlbmQiLCJwYXJlbnQiLCJlbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJsZW5ndGgiLCJjb25zb2xlIiwibG9nIiwibW9kYWxCdG4iLCJtb2RhbENvbnRlbnQiLCJzYXZlZEJsb2NrcyIsIm5ld01vZGFsIiwiYmxvY2tOdW1iZXIiLCJibG9ja0F0dHJpYnl0ZSIsImNsb25lQmxvY2siLCJjbG9uZU5vZGUiLCIkIiwibW9kYWwiXSwibWFwcGluZ3MiOiJBQXdCQSxTQUFTQSxVQUFVQyxHQUNmQyxhQUFhQyxRQUNiLElBQUlDLEVBQWEsRUFDYkMsRUFBT0osRUFBS0ksS0FDaEJDLGNBQWdCQyxTQUFTQyxLQUFLQyx1QkFBdUIsa0JBQWtCLEdBQ3ZFSixFQUFLSyxJQUFJLFNBQVVMLEdBQ2YsSUFBSU0sRUFBTUMsV0FBVyxPQUNyQkQsRUFBSUUsVUFBVUMsSUFBSSxNQUFP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Y0UsR0FDckJLLEVBQUUsY0FBY0MsTUFBTSxXQUd0QjlCLE1BQU0sb0JBR2QsTUFBT0YsR0FDSEUsTUFBTSx1QkFHZHRFLGVBQWU0RixFQUFjbEgiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAqIFRoaXJkIHBhcnR5XHJcbiAqL1xyXG5cclxuXHJcblxyXG4vKlxyXG4gKiBDdXN0b21cclxuICovXHJcblxyXG4vL0FQSVxyXG53aW5kb3cuZ2V0RGF0YUZyb21BUEkgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIHhoci5vcGVuKCdHRVQnLCAnaHR0cHM6Ly9waXhhYmF5LmNvbS9hcGkvP2tleT0yOTgwOTIwLTQ2ZjFhYTI2NGIwMzZmZmM2ZTQ1ZWJhZDAmb3JpZW50YXRpb249dmVydGljYWwmcT1yb2JvdCZtaW5faGVpZ2h0PTUwMCcpO1xyXG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcclxuICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2FsbGJhY2soeGhyLnJlc3BvbnNlKTtcclxuICAgIH07XHJcbiAgICB4aHIuc2VuZCgpO1xyXG59XHJcblxyXG5nZXREYXRhRnJvbUFQSShidWlsQmxvY2spO1xyXG5cclxuLy/Qv9C+0YHRgtGA0L7QtdC90LjQtSDQsdC70L7QutCwXHJcbmZ1bmN0aW9uIGJ1aWxCbG9jayhkYXRhKSB7XHJcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcclxuICAgIHZhciBibG9ja0NvdW50ID0gMTtcclxuICAgIHZhciBoaXRzID0gZGF0YS5oaXRzO1xyXG4gICAgcGFnZUNvbnRhaW5lciA9IGRvY3VtZW50LmJvZHkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncGFnZS1jb250YWluZXInKVswXTtcclxuICAgIGhpdHMubWFwKGZ1bmN0aW9uIChoaXRzKSB7XHJcbiAgICAgICAgdmFyIGRpdiA9IGNyZWF0ZU5vZGUoJ2RpdicpO1xyXG4gICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdyb3cnLCAncm93LXBhZ2VDb250YWluZXInKTtcclxuICAgICAgICBkaXYuc2V0QXR0cmlidXRlKFwiZGF0YS1ibG9ja0NvdW50XCIsIGJsb2NrQ291bnQpO1xyXG4gICAgICAgIGJsb2NrQ291bnQrKztcclxuICAgICAgICB2YXIgYnV0dG9ucyA9IFtcclxuICAgICAgICAgICAgeyB0ZXh0Qm50OiBcIlNhdmVcIiB9LFxyXG4gICAgICAgICAgICB7IHRleHRCbnQ6IFwiQXBwcm92ZVwiIH0sXHJcbiAgICAgICAgICAgIHsgdGV4dEJudDogXCJEZWNsaW5lXCIgfVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgdmFyIGNvbnRhaW5lcnMgPSBbXTtcclxuICAgICAgICB2YXIgY29udGVudCA9IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGV4dENvbnQ6IFwiVGFnczogXCIsXHJcbiAgICAgICAgICAgICAgICBsaW5rQ29udDogJ3RhZ3MnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRleHRDb250OiBcIkxpa2VzOiBcIixcclxuICAgICAgICAgICAgICAgIGxpbmtDb250OiAnbGlrZXMnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRleHRDb250OiBcIkxpbms6IFwiLFxyXG4gICAgICAgICAgICAgICAgbGlua0NvbnQ6ICdwYWdlVVJMJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF07XHJcbiAgICAgICAgY3JlYXRlRGVsZXRlQnV0dG9uKGNvbnRhaW5lcnMpO1xyXG4gICAgICAgIGNyZWF0ZUltZyhoaXRzLnVzZXJJbWFnZVVSTCwgY29udGFpbmVycyk7XHJcbiAgICAgICAgY3JlYXRlQ29udGVudChoaXRzLCBjb250ZW50LCBjb250YWluZXJzKTtcclxuICAgICAgICBjcmVhdGVCdXR0b25zTGlzdChidXR0b25zLCBjb250YWluZXJzKTtcclxuICAgICAgICBjcmVhdGVDb21tZW50c0Jsb2NrKGNvbnRhaW5lcnMpO1xyXG4gICAgICAgIHB1c2hDb250YWluZXJzKGNvbnRhaW5lcnMsIGRpdik7XHJcbiAgICAgICAgYXBwZW5kKHBhZ2VDb250YWluZXIsIGRpdik7XHJcbiAgICB9KTtcclxuICAgIGNvbnRyb2xsZXJzQnRuKHBhZ2VDb250YWluZXIsIGRvY3VtZW50LmJvZHkpO1xyXG4gICAgbW9kYWxWaWV3KGRvY3VtZW50LmJvZHkpO1xyXG59XHJcblxyXG5cclxuLy/RgdC+0LfQtNCw0L3QuNC1INGD0LfQu9CwXHJcbmZ1bmN0aW9uIGNyZWF0ZU5vZGUoZWxlbWVudCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZWxlbWVudCk7XHJcbn1cclxuXHJcbi8v0YPRgdGC0LDQvdC+0LLQu9C10L3QuNC1INGA0L7QtC4g0YHQstGP0LfQtdC5XHJcbndpbmRvdy5hcHBlbmQgPSBmdW5jdGlvbiAocGFyZW50LCBlbCkge1xyXG4gICAgcmV0dXJuIHBhcmVudC5hcHBlbmRDaGlsZChlbCk7XHJcbn1cclxuXHJcbi8v0LrQvtC90YLQtdC50L3QtdGAINC60L3QvtC/0L7QulxyXG5mdW5jdGlvbiBjcmVhdGVCdXR0b25zTGlzdChidXR0b25zLCBjb250YWluZXJzKSB7XHJcbiAgICB2YXIgY29udGFpbmVyID0gY3JlYXRlTm9kZSgnZGl2Jyk7XHJcbiAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY29sLW1kLTInKTtcclxuICAgIHZhciB1bCA9IGNyZWF0ZU5vZGUoJ3VsJyk7XHJcbiAgICBidXR0b25zLm1hcChmdW5jdGlvbiAoYnV0dG9ucykge1xyXG4gICAgICAgIHZhciBidG4gPSBjcmVhdGVOb2RlKCdidXR0b24nKTtcclxuICAgICAgICBidG4udGV4dENvbnRlbnQgPSBidXR0b25zLnRleHRCbnQ7XHJcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2J0bicsICdidG4tcHJpbWFyeScsICdidG4tYmxvY2snKTtcclxuICAgICAgICB2YXIgbGkgPSBjcmVhdGVOb2RlKCdsaScpO1xyXG4gICAgICAgIGFwcGVuZChsaSwgYnRuKTtcclxuICAgICAgICBhcHBlbmQodWwsIGxpKTtcclxuICAgIH0pO1xyXG4gICAgYXBwZW5kKGNvbnRhaW5lciwgdWwpO1xyXG4gICAgY29udGFpbmVycy5wdXNoKGNvbnRhaW5lcik7XHJcbiAgICByZXR1cm4gY29udGFpbmVyO1xyXG59XHJcblxyXG4vL9C60L7QvdGC0LXQudGC0LXRgCDRgSDQutCw0YDRgtC40L3QutC+0LlcclxuZnVuY3Rpb24gY3JlYXRlSW1nKGltZ1NyYywgY29udGFpbmVycykge1xyXG4gICAgdmFyIGNvbnRhaW5lciA9IGNyZWF0ZU5vZGUoJ2RpdicpO1xyXG4gICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2NvbC1tZC00JywgJ2NvbC14cy0xMicsICdjb2wtc20tNicpO1xyXG4gICAgdmFyIGltZyA9IGNyZWF0ZU5vZGUoJ2ltZycpO1xyXG4gICAgaW1nLnNyYyA9IGltZ1NyYztcclxuICAgIGltZy5jbGFzc0xpc3QuYWRkKCdpbWctcmVzcG9uc2l2ZScsICdpbWctY2lyY2xlJywgJ214LWF1dG8nKTtcclxuICAgIGFwcGVuZChjb250YWluZXIsIGltZyk7XHJcbiAgICBjb250YWluZXJzLnB1c2goY29udGFpbmVyKTtcclxuICAgIHJldHVybiBjb250YWluZXI7XHJcbn1cclxuXHJcbi8v0LrQvtC90YLQtdC50L3QtdGAINGBINC60L7QvdGC0LXQvdGC0L7QvFxyXG5mdW5jdGlvbiBjcmVhdGVDb250ZW50KGhpdHMsIGNvbnRlbnQsIGNvbnRhaW5lcnMpIHtcclxuICAgIHZhciBjb250YWluZXIgPSBjcmVhdGVOb2RlKCdkaXYnKTtcclxuICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdjb2wtbWQtNScsICdjb2wteHMtMTInLCAnY29sLXNtLTYnLCAndGV4dC1sZWZ0Jyk7XHJcbiAgICBjb250ZW50Lm1hcChmdW5jdGlvbiAoY29udCkge1xyXG4gICAgICAgIGlmIChjb250LmxpbmtDb250ID09IFwicGFnZVVSTFwiKSB7XHJcbiAgICAgICAgICAgIHZhciBhID0gY3JlYXRlTm9kZSgnYScpO1xyXG4gICAgICAgICAgICBhLnNldEF0dHJpYnV0ZShcInRhcmdldFwiLCBcIl9ibGFua1wiKTtcclxuICAgICAgICAgICAgYS5ocmVmID0gaGl0c1tjb250LmxpbmtDb250XTtcclxuICAgICAgICAgICAgYS50ZXh0Q29udGVudCA9IGhpdHNbY29udC5saW5rQ29udF07XHJcbiAgICAgICAgICAgIGFwcGVuZChjb250YWluZXIsIGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHAgPSBjcmVhdGVOb2RlKCdwJyk7XHJcbiAgICAgICAgICAgIHAuaW5uZXJIVE1MID0gY29udC50ZXh0Q29udCArIGhpdHNbY29udC5saW5rQ29udF07XHJcbiAgICAgICAgICAgIGFwcGVuZChjb250YWluZXIsIHApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KTtcclxuICAgIGNvbnRhaW5lcnMucHVzaChjb250YWluZXIpO1xyXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcclxufVxyXG5cclxuLy/QutC90L7Qv9C60LAg0YPQtNCw0LvQtdC90LjRjyDQsdC70L7QutCwXHJcbmZ1bmN0aW9uIGNyZWF0ZURlbGV0ZUJ1dHRvbihjb250YWluZXJzKSB7XHJcbiAgICB2YXIgY29udGFpbmVyID0gY3JlYXRlTm9kZSgnZGl2Jyk7XHJcbiAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY29sLW1kLTEnLCAnb3JkZXItMTInLCAnY29sLXhzLTInKTtcclxuICAgIHZhciBidG4gPSBjcmVhdGVOb2RlKCdidXR0b24nKTtcclxuICAgIGJ0bi50ZXh0Q29udGVudCA9IFwiWFwiO1xyXG4gICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2J0bicsICdidG4tZGFuZ2VyJyk7XHJcbiAgICBhcHBlbmQoY29udGFpbmVyLCBidG4pO1xyXG4gICAgY29udGFpbmVycy5wdXNoKGNvbnRhaW5lcik7XHJcbiAgICByZXR1cm4gY29udGFpbmVyO1xyXG59XHJcblxyXG4vL9C60L7QvNC10L3RgtCw0YDQuNC4XHJcbmZ1bmN0aW9uIGNyZWF0ZUNvbW1lbnRzQmxvY2soY29udGFpbmVycykge1xyXG4gICAgdmFyIGNvbnRhaW5lciA9IGNyZWF0ZU5vZGUoJ2RpdicpLFxyXG4gICAgICAgIHBhbmVsID0gY3JlYXRlTm9kZSgnZGl2JyksXHJcbiAgICAgICAgcGFuZWxMaXN0ID0gY3JlYXRlTm9kZSgnZGl2JyksXHJcbiAgICAgICAgcGFuZWxIZWFkaW5nID0gY3JlYXRlTm9kZSgnaDQnKSxcclxuICAgICAgICBwYW5lbExpc3RJdGVtMSA9IGNyZWF0ZU5vZGUoJ2EnKSxcclxuICAgICAgICBzcGFuID0gY3JlYXRlTm9kZSgnc3BhbicpLFxyXG4gICAgICAgIGxhYmVsQ29tbWVudCA9IGNyZWF0ZU5vZGUoJ2xhYmVsJyksXHJcbiAgICAgICAgY29tbWVudHNCb3ggPSBjcmVhdGVOb2RlKCd0ZXh0YXJlYScpLFxyXG4gICAgICAgIGNvbW1lbnRzTGluZSA9IGNyZWF0ZU5vZGUoJ2lucHV0JyksXHJcbiAgICAgICAgaW5wdXRHcm91cCA9IGNyZWF0ZU5vZGUoJ2RpdicpLFxyXG4gICAgICAgIGJ1dHRvbkFkZENvbW1lbnQgPSBjcmVhdGVOb2RlKCdidXR0b24nKTtcclxuICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdjb2wtMTInLCAnZm9ybS1ncm91cCcpO1xyXG4gICAgaW5wdXRHcm91cC5jbGFzc0xpc3QuYWRkKCdpbnB1dC1ncm91cCcpO1xyXG4gICAgcGFuZWwuY2xhc3NMaXN0LmFkZCgncGFuZWwnLCAncGFuZWwtZGVmYXVsdCcpO1xyXG4gICAgcGFuZWxIZWFkaW5nLmNsYXNzTGlzdC5hZGQoJ3BhbmVsLWhlYWRpbmcnKTtcclxuICAgIHBhbmVsSGVhZGluZy50ZXh0Q29udGVudCA9IFwiQ29tbWVudHNcIjtcclxuICAgIHBhbmVsTGlzdC5jbGFzc0xpc3QuYWRkKCdsaXN0LWdyb3VwJyk7XHJcbiAgICBwYW5lbExpc3RJdGVtMS5jbGFzc0xpc3QuYWRkKCdsaXN0LWdyb3VwLWl0ZW0nLCAnZmlyc3QtbGlzdC1pdGVtJyk7XHJcbiAgICBwYW5lbExpc3RJdGVtMS50ZXh0Q29udGVudCA9IFwiQWRkIHlvdXIgY29tbWVudHMhXCI7XHJcbiAgICBzcGFuLmNsYXNzTGlzdC5hZGQoXCJiYWRnZVwiKTtcclxuICAgIHNwYW4udGV4dENvbnRlbnQgPSBcIjNcIjtcclxuXHJcbiAgICBidXR0b25BZGRDb21tZW50LmNsYXNzTGlzdC5hZGQoJ2J0bicsICdidG4tY29tbWVudCcpO1xyXG4gICAgY29tbWVudHNCb3guc2V0QXR0cmlidXRlKFwicm93XCIsIFwiMTBcIik7XHJcbiAgICBjb21tZW50c0JveC5jbGFzc0xpc3QuYWRkKCdmb3JtLWNvbnRyb2wnKTtcclxuICAgIGNvbW1lbnRzTGluZS5jbGFzc0xpc3QuYWRkKCdmb3JtLWNvbnRyb2wnKTtcclxuICAgIGJ1dHRvbkFkZENvbW1lbnQudGV4dENvbnRlbnQgPSBcIkFkZCBjb21tZW50XCI7XHJcblxyXG4gICAgYXBwZW5kKHBhbmVsTGlzdCwgcGFuZWxMaXN0SXRlbTEpO1xyXG4gICAgYXBwZW5kKHBhbmVsLCBwYW5lbEhlYWRpbmcpO1xyXG4gICAgYXBwZW5kKHBhbmVsLCBwYW5lbExpc3QpO1xyXG4gICAgYXBwZW5kKGNvbnRhaW5lciwgcGFuZWwpO1xyXG4gICAgYXBwZW5kKGlucHV0R3JvdXAsIGNvbW1lbnRzTGluZSk7XHJcbiAgICBhcHBlbmQoaW5wdXRHcm91cCwgYnV0dG9uQWRkQ29tbWVudCk7XHJcbiAgICBhcHBlbmQoY29udGFpbmVyLCBpbnB1dEdyb3VwKTtcclxuICAgIGNvbnRhaW5lcnMucHVzaChjb250YWluZXIpO1xyXG59XHJcbi8v0LTQvtCx0LDQstC70LXQvdC40LUg0LrQvtC90YLQtdC50L3QtdGA0L7QsiDQsiBkaXYucm93XHJcbmZ1bmN0aW9uIHB1c2hDb250YWluZXJzKGNvbnRhaW5lcnMsIGRpdikge1xyXG4gICAgY29udGFpbmVycy5tYXAoZnVuY3Rpb24gKGNvbnQpIHtcclxuICAgICAgICBhcHBlbmQoZGl2LCBjb250KTtcclxuICAgIH0pO1xyXG59O1xyXG4vL9GE0YPQvdC60YbQuNC+0L3QsNC7INC60L3QvtC/0L7QulxyXG53aW5kb3cuY29udHJvbGxlcnNCdG4gPSBmdW5jdGlvbiAoY29udGFpbmVyLCBib2R5KSB7XHJcbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYnRuXCIpKSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQudGV4dENvbnRlbnQgPT0gXCJBcHByb3ZlXCIpIHtcclxuICAgICAgICAgICAgICAgIGFwcHJvdmVDdHJsKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC50YXJnZXQudGV4dENvbnRlbnQgPT0gXCJEZWNsaW5lXCIpIHtcclxuICAgICAgICAgICAgICAgIGRlY2xpbmVDdHJsKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC50YXJnZXQudGV4dENvbnRlbnQgPT0gXCJYXCIpIHtcclxuICAgICAgICAgICAgICAgIC8v0YPQtNCw0LvQtdC90LjQtSDQsdC70L7QutCwICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUxvY2FsU3RvcmFnZShldmVudCwgYm9keSk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7IH1cclxuICAgICAgICAgICAgICAgIGRlbGV0ZUJsb2NrKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC50YXJnZXQudGV4dENvbnRlbnQgPT0gXCJBZGQgY29tbWVudFwiKSB7XHJcbiAgICAgICAgICAgICAgICAvL9C00L7QsdCw0LLQu9C10L3QuNC1INC60L7QvNC10L3RgtCw0YDQuNGPICBcclxuICAgICAgICAgICAgICAgIGFkZENvbW1lbnQoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LnRhcmdldC50ZXh0Q29udGVudCA9PSBcIkRlbGV0ZSBjb21tZW50XCIpIHtcclxuICAgICAgICAgICAgICAgIC8v0YPQtNCw0LvQtdC90LjQtSDQutC+0LzQtdC90YLQsNGA0LjRj1xyXG4gICAgICAgICAgICAgICAgZXZlbnQucGF0aFsxXS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC50YXJnZXQudGV4dENvbnRlbnQgPT0gXCJTYXZlXCIpIHtcclxuICAgICAgICAgICAgICAgIC8vY9C+0YXRgNGA0LDQvdC10L3QuNC1INCx0LvQvtC60LBcclxuICAgICAgICAgICAgICAgIHNhdmVUb0xvY2FsU3RvcmFnZShldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQudGFyZ2V0LnRleHRDb250ZW50ID09IFwiRGVsZXRlXCIpIHtcclxuICAgICAgICAgICAgICAgIC8v0YPQtNCw0LvQtdC90LjQtSDQsdC70L7QutCwXHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQucGF0aFs1XS5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsLWJvZHknKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnBhdGhbMF0uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZUZyb21Mb2NhbFN0b3JhZ2UoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGJvZHkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm1vZGFsLWJ0blwiKVswXS50ZXh0Q29udGVudCA9IFwiTGF1bmNoIG1vZGFsIFwiICsgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9jYWxPYmplY3QnKSkuYmxvY2tzQ291bnQubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy/QvtCx0L3QvtCy0LvQtdC90LjQtSBMb2NhbCBTdG9yYWdlINC/0L7RgdC70LUg0YPQtNCw0LvQtdC90LjRjyDQsdC70L7QutCwXHJcbmZ1bmN0aW9uIHVwZGF0ZUxvY2FsU3RvcmFnZShldmVudCwgYm9keSkge1xyXG4gICAgdmFyIHJvd1BhZ2VDb250YWluZXIgPSBmaW5kUHJvcGVydHkoZXZlbnQucGF0aCwgJ3Jvdy1wYWdlQ29udGFpbmVyJyk7XHJcbiAgICB2YXIgcmV0cmlldmVkT2JqZWN0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9jYWxPYmplY3QnKSk7XHJcbiAgICByZXRyaWV2ZWRPYmplY3QuYmxvY2tzQ291bnQuc3BsaWNlKHJldHJpZXZlZE9iamVjdC5ibG9ja3NDb3VudC5pbmRleE9mKGV2ZW50LnBhdGhbcm93UGFnZUNvbnRhaW5lcl0uYXR0cmlidXRlc1sxXS52YWx1ZSksIDEpO1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xvY2FsT2JqZWN0JywgSlNPTi5zdHJpbmdpZnkocmV0cmlldmVkT2JqZWN0KSk7XHJcbiAgICB2YXIgcGFnZUNvbnRhaW5lclRlbXAgPSBib2R5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJwYWdlLWNvbnRhaW5lclwiKVswXSxcclxuICAgICAgICByb3dBdHRyaWJ1dGVOYW1lVGVtcCA9IFwiZGl2W2RhdGEtYmxvY2tDb3VudD0nXCIgKyBldmVudC5wYXRoW3Jvd1BhZ2VDb250YWluZXJdLmF0dHJpYnV0ZXNbMV0udmFsdWUgKyBcIiddXCIsXHJcbiAgICAgICAgcm93VGVtcCA9IHBhZ2VDb250YWluZXJUZW1wLnF1ZXJ5U2VsZWN0b3JBbGwocm93QXR0cmlidXRlTmFtZVRlbXApWzBdLFxyXG4gICAgICAgIHNhdmVCdG4gPSByb3dUZW1wLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJidG4tYmxvY2tcIilbMF07XHJcbiAgICBzYXZlQnRuLmlubmVyVGV4dCA9IFwiU2F2ZVwiO1xyXG59XHJcblxyXG4vL9GE0YPQvdC60YbQuNC+0L3QsNC7INC60L3QvtC/0LrQuCBcIlNhdmVcIlxyXG5mdW5jdGlvbiBzYXZlVG9Mb2NhbFN0b3JhZ2UoZXZlbnQpIHtcclxuICAgIHZhciBidG5Nb2RhbCA9IGV2ZW50LnBhdGhbNl0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpO1xyXG4gICAgZXZlbnQucGF0aFswXS5pbm5lclRleHQgPSBcIkRlbGV0ZVwiO1xyXG4gICAgdmFyIHJldHJpZXZlZE9iamVjdCA9IG5ldyBPYmplY3QoKTtcclxuICAgIGlmICghbG9jYWxTdG9yYWdlLmxvY2FsT2JqZWN0KSB7XHJcbiAgICAgICAgcmV0cmlldmVkT2JqZWN0ID0ge1xyXG4gICAgICAgICAgICBibG9ja3NDb3VudDogW11cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobG9jYWxTdG9yYWdlLmxvY2FsT2JqZWN0KSB7XHJcbiAgICAgICAgcmV0cmlldmVkT2JqZWN0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9jYWxPYmplY3QnKSk7XHJcbiAgICB9XHJcbiAgICByZXRyaWV2ZWRPYmplY3QuYmxvY2tzQ291bnQucHVzaChldmVudC5wYXRoWzRdLmF0dHJpYnV0ZXNbMV0udmFsdWUpO1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xvY2FsT2JqZWN0JywgSlNPTi5zdHJpbmdpZnkocmV0cmlldmVkT2JqZWN0KSk7XHJcbn1cclxuXHJcbi8v0YTRg9C90LrRhtC40L7QvdCw0Lsg0LrQvdC+0L/QutC4IFwiRGVsZXRlXCJcclxuZnVuY3Rpb24gZGVsZXRlRnJvbUxvY2FsU3RvcmFnZShldmVudCkge1xyXG4gICAgdmFyIHJvd1BhZ2VDb250YWluZXIgPSBmaW5kUHJvcGVydHkoZXZlbnQucGF0aCwgJ3Jvdy1wYWdlQ29udGFpbmVyJyk7XHJcbiAgICBldmVudC5wYXRoWzBdLmlubmVyVGV4dCA9IFwiU2F2ZVwiO1xyXG4gICAgdmFyIHJldHJpZXZlZE9iamVjdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvY2FsT2JqZWN0JykpO1xyXG4gICAgcmV0cmlldmVkT2JqZWN0LmJsb2Nrc0NvdW50LnNwbGljZShyZXRyaWV2ZWRPYmplY3QuYmxvY2tzQ291bnQuaW5kZXhPZihldmVudC5wYXRoW3Jvd1BhZ2VDb250YWluZXJdLmF0dHJpYnV0ZXNbMV0udmFsdWUpLCAxKTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsb2NhbE9iamVjdCcsIEpTT04uc3RyaW5naWZ5KHJldHJpZXZlZE9iamVjdCkpO1xyXG59XHJcblxyXG4vL9GE0YPQvdC60YbQuNC+0L3QsNC7INC60L3QvtC/0LrQuCBcIlhcIlxyXG5mdW5jdGlvbiBkZWxldGVCbG9jayhldmVudCkge1xyXG4gICAgdmFyIHJvd0luZGV4ID0gZmluZFByb3BlcnR5KGV2ZW50LnBhdGgsICdyb3ctcGFnZUNvbnRhaW5lcicpO1xyXG4gICAgZXZlbnQucGF0aFtyb3dJbmRleF0ucmVtb3ZlKCk7XHJcbn1cclxuXHJcbi8v0YTRg9C90LrRhtC40L7QvdCw0Lsg0LrQvdC+0L/QutC4IFwiQXBwcm92ZVwiXHJcbmZ1bmN0aW9uIGFwcHJvdmVDdHJsKGV2ZW50KSB7XHJcbiAgICB2YXIgYnV0dG9ucyA9IGV2ZW50LnBhdGhbMl0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJidXR0b25cIiksXHJcbiAgICAgICAgcExpa2VzID0gZXZlbnQucGF0aFs0XS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInBcIiksXHJcbiAgICAgICAgbGlrZUNvdW50ID0gcExpa2VzWzFdLnRleHRDb250ZW50LnNsaWNlKDYsIDkpO1xyXG4gICAgYnV0dG9uc1sxXS5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIpO1xyXG4gICAgYnV0dG9uc1syXS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgIGV2ZW50LnBhdGhbNF0uY2xhc3NMaXN0LmFkZChcImJsb2NrbGl0ZUdyZWVuXCIpO1xyXG4gICAgZXZlbnQucGF0aFs0XS5jbGFzc0xpc3QucmVtb3ZlKFwiYmxvY2tsaXRlUmVkXCIpO1xyXG4gICAgbGlrZUNvdW50Kys7XHJcbiAgICBwTGlrZXNbMV0uaW5uZXJIVE1MID0gXCJMaWtlczogXCIgKyBsaWtlQ291bnQ7XHJcbn1cclxuXHJcbi8v0YTRg9C90LrRhtC40L7QvdCw0Lsg0LrQvdC+0L/QutC4IFwiRGVjbGluZVwiXHJcbmZ1bmN0aW9uIGRlY2xpbmVDdHJsKGV2ZW50KSB7XHJcbiAgICB2YXIgYnV0dG9ucyA9IGV2ZW50LnBhdGhbMl0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJidXR0b25cIiksXHJcbiAgICAgICAgcExpa2VzID0gZXZlbnQucGF0aFs0XS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInBcIiksXHJcbiAgICAgICAgbGlrZUNvdW50ID0gcExpa2VzWzFdLnRleHRDb250ZW50LnNsaWNlKDYsIDkpO1xyXG4gICAgYnV0dG9uc1syXS5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIpO1xyXG4gICAgYnV0dG9uc1sxXS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgIGV2ZW50LnBhdGhbNF0uY2xhc3NMaXN0LmFkZChcImJsb2NrbGl0ZVJlZFwiKTtcclxuICAgIGV2ZW50LnBhdGhbNF0uY2xhc3NMaXN0LnJlbW92ZShcImJsb2NrbGl0ZUdyZWVuXCIpO1xyXG4gICAgbGlrZUNvdW50LS07XHJcbiAgICBwTGlrZXNbMV0uaW5uZXJIVE1MID0gXCJMaWtlczogXCIgKyBsaWtlQ291bnQ7XHJcbn1cclxuXHJcbi8v0LTQvtCx0LDQstC70LXQvdC40LUg0LrQvtC80LXQvdGC0LDRgNC40LXQslxyXG5mdW5jdGlvbiBhZGRDb21tZW50KGV2ZW50KSB7XHJcbiAgICB2YXIgcm93SW5kZXggPSBmaW5kUHJvcGVydHkoZXZlbnQucGF0aCwgJ3Jvdy1wYWdlQ29udGFpbmVyJyk7XHJcbiAgICB2YXIgbGluZUNvbW1lbnQgPSBldmVudC5wYXRoW3Jvd0luZGV4XS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZm9ybS1jb250cm9sXCIpWzBdO1xyXG4gICAgaWYgKGxpbmVDb21tZW50LnZhbHVlICE9IFwiXCIpIHtcclxuICAgICAgICB2YXIgbGlzdEdyb3VwID0gZXZlbnQucGF0aFsyXS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMV0sXHJcbiAgICAgICAgICAgIHBhbmVsTGlzdE5ld0l0ZW0gPSBjcmVhdGVOb2RlKCdhJyksXHJcbiAgICAgICAgICAgIGJ1dHRvbkFkZENvbW1lbnQgPSBjcmVhdGVOb2RlKCdidXR0b24nKSxcclxuICAgICAgICAgICAgYnV0dG9uRGVsZXRlQ29tbWVudCA9IGNyZWF0ZU5vZGUoJ2J1dHRvbicpO1xyXG4gICAgICAgIGJ1dHRvbkRlbGV0ZUNvbW1lbnQudGV4dENvbnRlbnQgPSBcIkRlbGV0ZSBjb21tZW50XCI7XHJcbiAgICAgICAgYnV0dG9uRGVsZXRlQ29tbWVudC5jbGFzc0xpc3QuYWRkKFwiZGVsZXRlQnRuXCIsIFwiYnRuXCIpO1xyXG4gICAgICAgIGJ1dHRvbkFkZENvbW1lbnQuY2xhc3NMaXN0LmFkZCgnYnRuJyk7XHJcbiAgICAgICAgcGFuZWxMaXN0TmV3SXRlbS5jbGFzc0xpc3QuYWRkKCdsaXN0LWdyb3VwLWl0ZW0nKTtcclxuICAgICAgICBwYW5lbExpc3ROZXdJdGVtLnRleHRDb250ZW50ID0gZXZlbnQucGF0aFsxXS5maXJzdENoaWxkLnZhbHVlO1xyXG4gICAgICAgIGFwcGVuZChwYW5lbExpc3ROZXdJdGVtLCBidXR0b25EZWxldGVDb21tZW50KTtcclxuICAgICAgICBldmVudC5wYXRoWzFdLmZpcnN0Q2hpbGQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5wYXRoWzJdLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdLmNsYXNzTGlzdC5jb250YWlucygnZmlyc3QtbGlzdC1pdGVtJykpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnBhdGhbMl0uY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzFdLmNoaWxkTm9kZXNbMF0ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHsgfVxyXG4gICAgICAgIGxpc3RHcm91cC5hcHBlbmRDaGlsZChwYW5lbExpc3ROZXdJdGVtKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGFsZXJ0KFwiWW91ciBjb21tZW50IGlzIGVtcHR5IVwiKTtcclxuICAgIH1cclxufVxyXG5cclxuLy/QvdCw0YXQvtC20LTQtdC90LjQtSDQutC70LDRgdGB0LBcclxuZnVuY3Rpb24gZmluZFByb3BlcnR5KG9iaiwgZmluZENsYXNzKSB7XHJcbiAgICBmb3IgKHZhciBpIGluIG9iaikge1xyXG4gICAgICAgIGlmIChvYmpbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKGZpbmRDbGFzcykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8v0YTRg9C90LrRhtC40L7QvdCw0Lsg0LzQvtC00LDQu9GM0L3QvtCz0L4g0L7QutC90LBcclxud2luZG93Lm1vZGFsVmlldyA9IGZ1bmN0aW9uIChib2R5KSB7XHJcbiAgICB2YXIgbW9kYWxCdG4gPSBib2R5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtb2RhbC1idG5cIik7XHJcbiAgICBib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YXIgeCA9IGJvZHkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm1vZGFsLWJ0blwiKVswXTtcclxuICAgICAgICAgICAgeC50ZXh0Q29udGVudCA9IFwiTGF1bmNoIG1vZGFsIFwiICsgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9jYWxPYmplY3QnKSkuYmxvY2tzQ291bnQubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICB9KTtcclxuICAgIHZhciBtb2RhbENvbnRlbnQgPSBib2R5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtb2RhbC1jb250ZW50XCIpWzBdO1xyXG4gICAgbW9kYWxCdG5bMF0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHZhciBtb2RhbFZpZXcgPSBib2R5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtb2RhbC1ib2R5XCIpWzBdLFxyXG4gICAgICAgICAgICBzYXZlZEJsb2NrcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvY2FsT2JqZWN0JykpLFxyXG4gICAgICAgICAgICBuZXdNb2RhbCA9IGNyZWF0ZU5vZGUoXCJkaXZcIik7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYm9keS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibW9kYWwtYm9keVwiKVswXS5yZW1vdmUoKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IH1cclxuICAgICAgICBuZXdNb2RhbC5jbGFzc0xpc3QuYWRkKCdtb2RhbC1ib2R5Jyk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHNhdmVkQmxvY2tzLmJsb2Nrc0NvdW50Lmxlbmd0aCAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgICBzYXZlZEJsb2Nrcy5ibG9ja3NDb3VudC5tYXAoZnVuY3Rpb24gKGJsb2NrTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2NrQXR0cmlieXRlID0gXCJkaXZbZGF0YS1ibG9ja0NvdW50PSdcIiArIGJsb2NrTnVtYmVyICsgXCInXVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9jayA9IGJvZHkucXVlcnlTZWxlY3RvckFsbChibG9ja0F0dHJpYnl0ZSlbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lQmxvY2sgPSBibG9jay5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kKG5ld01vZGFsLCBjbG9uZUJsb2NrKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYXBwZW5kKG1vZGFsQ29udGVudCwgbmV3TW9kYWwpO1xyXG4gICAgICAgICAgICAgICAgJCgnI21vZGFsVmlldycpLm1vZGFsKCd0b2dnbGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiTm8gc2F2ZWQgYmxvY2tzIVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBhbGVydChcIk5vIHNhdmVkIGJsb2NrcyFcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBjb250cm9sbGVyc0J0bihtb2RhbENvbnRlbnQsIGJvZHkpO1xyXG59Il19
