function builBlock(t){localStorage.clear();var e=1,a=t.hits;pageContainer=document.body.getElementsByClassName("page-container")[0],a.map(function(t){var a=createNode("div");a.classList.add("row","row-pageContainer"),a.setAttribute("data-blockCount",e),e++;var o=[{textBnt:"Save"},{textBnt:"Approve"},{textBnt:"Decline"}],n=[],l=[{textCont:"Tags: ",linkCont:"tags"},{textCont:"Likes: ",linkCont:"likes"},{textCont:"Link: ",linkCont:"pageURL"}];createDeleteButton(n),createImg(t.userImageURL,n),createContent(t,l,n),createButtonsList(o,n),createCommentsBlock(n),pushContainers(n,a),append(pageContainer,a)}),controllersBtn(pageContainer,document.body),modalView(document.body)}function createNode(t){return document.createElement(t)}function createButtonsList(t,e){var a=createNode("div");a.classList.add("col-md-2");var o=createNode("ul");return t.map(function(t){var e=createNode("button");e.textContent=t.textBnt,e.classList.add("btn","btn-primary","btn-block");var a=createNode("li");append(a,e),append(o,a)}),append(a,o),e.push(a),a}function createImg(t,e){var a=createNode("div");a.classList.add("col-md-4","col-xs-12","col-sm-6");var o=createNode("img");return o.src=t,o.classList.add("img-responsive","img-circle","mx-auto"),append(a,o),e.push(a),a}function createContent(t,e,a){var o=createNode("div");return o.classList.add("col-md-5","col-xs-12","col-sm-6","text-left"),e.map(function(e){if("pageURL"==e.linkCont){var a=createNode("a");a.setAttribute("target","_blank"),a.href=t[e.linkCont],a.textContent=t[e.linkCont],append(o,a)}else{var n=createNode("p");n.innerHTML=e.textCont+t[e.linkCont],append(o,n)}}),a.push(o),o}function createDeleteButton(t){var e=createNode("div");e.classList.add("col-md-1","order-12","col-xs-2");var a=createNode("button");return a.textContent="X",a.classList.add("btn","btn-danger"),append(e,a),t.push(e),e}function createCommentsBlock(t){var e=createNode("div"),a=createNode("div"),o=createNode("div"),n=createNode("h4"),l=createNode("a"),s=createNode("span"),c=(createNode("label"),createNode("textarea")),r=createNode("input"),d=createNode("div"),i=createNode("button");e.classList.add("col-12","form-group"),d.classList.add("input-group"),a.classList.add("panel","panel-default"),n.classList.add("panel-heading"),n.textContent="Comments",o.classList.add("list-group"),l.classList.add("list-group-item","first-list-item"),l.textContent="Add your comments!",s.classList.add("badge"),s.textContent="3",i.classList.add("btn","btn-comment"),c.setAttribute("row","10"),c.classList.add("form-control"),r.classList.add("form-control"),i.textContent="Add comment",append(o,l),append(a,n),append(a,o),append(e,a),append(d,r),append(d,i),append(e,d),t.push(e)}function pushContainers(t,e){t.map(function(t){append(e,t)})}function updateLocalStorage(t,e){var a=findProperty(t.path,"row-pageContainer"),o=JSON.parse(localStorage.getItem("localObject"));o.blocksCount.splice(o.blocksCount.indexOf(t.path[a].attributes[1].value),1),localStorage.setItem("localObject",JSON.stringify(o));var n=e.getElementsByClassName("page-container")[0],l="div[data-blockCount='"+t.path[a].attributes[1].value+"']";n.querySelectorAll(l)[0].getElementsByClassName("btn-block")[0].innerText="Save"}function saveToLocalStorage(t){t.path[6].getElementsByTagName("body");t.path[0].innerText="Delete";var e=new Object;localStorage.localObject?localStorage.localObject&&(e=JSON.parse(localStorage.getItem("localObject"))):e={blocksCount:[]},e.blocksCount.push(t.path[4].attributes[1].value),localStorage.setItem("localObject",JSON.stringify(e))}function deleteFromLocalStorage(t){var e=findProperty(t.path,"row-pageContainer");t.path[0].innerText="Save";var a=JSON.parse(localStorage.getItem("localObject"));a.blocksCount.splice(a.blocksCount.indexOf(t.path[e].attributes[1].value),1),localStorage.setItem("localObject",JSON.stringify(a))}function deleteBlock(t){var e=findProperty(t.path,"row-pageContainer");t.path[e].remove()}function approveCtrl(t){var e=t.path[2].getElementsByTagName("button"),a=t.path[4].getElementsByTagName("p"),o=a[1].textContent.slice(6,9);e[1].setAttribute("disabled","disabled"),e[2].removeAttribute("disabled"),t.path[4].classList.add("blockliteGreen"),t.path[4].classList.remove("blockliteRed"),o++,a[1].innerHTML="Likes: "+o}function declineCtrl(t){var e=t.path[2].getElementsByTagName("button"),a=t.path[4].getElementsByTagName("p"),o=a[1].textContent.slice(6,9);e[2].setAttribute("disabled","disabled"),e[1].removeAttribute("disabled"),t.path[4].classList.add("blockliteRed"),t.path[4].classList.remove("blockliteGreen"),o--,a[1].innerHTML="Likes: "+o}function addComment(t){var e=findProperty(t.path,"row-pageContainer");if(""!=t.path[e].getElementsByClassName("form-control")[0].value){var a=t.path[2].childNodes[0].childNodes[1],o=createNode("a"),n=createNode("button"),l=createNode("button");l.textContent="Delete comment",l.classList.add("deleteBtn","btn"),n.classList.add("btn"),o.classList.add("list-group-item"),o.textContent=t.path[1].firstChild.value,append(o,l),t.path[1].firstChild.value="";try{t.path[2].childNodes[0].childNodes[1].childNodes[0].classList.contains("first-list-item")&&t.path[2].childNodes[0].childNodes[1].childNodes[0].remove()}catch(t){}a.appendChild(o)}else alert("Your comment is empty!")}function findProperty(t,e){for(var a in t)if(t[a].classList.contains(e))return a}window.getDataFromAPI=function(t){var e=new XMLHttpRequest;e.open("GET","https://pixabay.com/api/?key=2980920-46f1aa264b036ffc6e45ebad0&orientation=vertical&q=robot&min_height=500"),e.responseType="json",e.onload=function(){t(e.response)},e.send()},getDataFromAPI(builBlock),window.append=function(t,e){return t.appendChild(e)},window.controllersBtn=function(t,e){t.addEventListener("click",function(t){if(t.target.classList.contains("btn"))if("Approve"==t.target.textContent)approveCtrl(t);else if("Decline"==t.target.textContent)declineCtrl(t);else if("X"==t.target.textContent){try{updateLocalStorage(t,e)}catch(t){}deleteBlock(t)}else"Add comment"==t.target.textContent?addComment(t):"Delete comment"==t.target.textContent?t.path[1].remove():"Save"==t.target.textContent?saveToLocalStorage(t):"Delete"==t.target.textContent&&(t.path[5].classList.contains("modal-body")?t.path[0].setAttribute("disabled","disabled"):deleteFromLocalStorage(t));try{e.getElementsByClassName("modal-btn")[0].textContent="Launch modal "+JSON.parse(localStorage.getItem("localObject")).blocksCount.length}catch(t){e.getElementsByClassName("modal-btn")[0].textContent="Launch modal 0"}})},window.modalView=function(t){var e=t.getElementsByClassName("modal-btn");t.addEventListener("click",function(e){try{t.getElementsByClassName("modal-btn")[0].textContent="Launch modal "+JSON.parse(localStorage.getItem("localObject")).blocksCount.length}catch(t){}});var a=t.getElementsByClassName("modal-content")[0];e[0].addEventListener("click",function(e){t.getElementsByClassName("modal-body")[0];var o=JSON.parse(localStorage.getItem("localObject")),n=createNode("div");try{t.getElementsByClassName("modal-body")[0].remove()}catch(t){}n.classList.add("modal-body");try{0!=o.blocksCount.length?(o.blocksCount.map(function(e){var a="div[data-blockCount='"+e+"']",o=t.querySelectorAll(a)[0].cloneNode(!0);append(n,o)}),append(a,n),$("#modalView").modal("toggle")):alert("No saved blocks!")}catch(t){alert("No saved blocks!")}}),controllersBtn(a,t)};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiYnVpbEJsb2NrIiwiZGF0YSIsImxvY2FsU3RvcmFnZSIsImNsZWFyIiwiYmxvY2tDb3VudCIsImhpdHMiLCJwYWdlQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJib2R5IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsIm1hcCIsImRpdiIsImNyZWF0ZU5vZGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJidXR0b25zIiwidGV4dEJudCIsImNvbnRhaW5lcnMiLCJjb250ZW50IiwidGV4dENvbnQiLCJsaW5rQ29udCIsImNyZWF0ZURlbGV0ZUJ1dHRvbiIsImNyZWF0ZUltZyIsInVzZXJJbWFnZVVSTCIsImNyZWF0ZUNvbnRlbnQiLCJjcmVhdGVCdXR0b25zTGlzdCIsImNyZWF0ZUNvbW1lbnRzQmxvY2siLCJwdXNoQ29udGFpbmVycyIsImFwcGVuZCIsImNvbnRyb2xsZXJzQnRuIiwibW9kYWxWaWV3IiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjb250YWluZXIiLCJ1bCIsImJ0biIsInRleHRDb250ZW50IiwibGkiLCJwdXNoIiwiaW1nU3JjIiwiaW1nIiwic3JjIiwiY29udCIsImEiLCJocmVmIiwicCIsImlubmVySFRNTCIsInBhbmVsIiwicGFuZWxMaXN0IiwicGFuZWxIZWFkaW5nIiwicGFuZWxMaXN0SXRlbTEiLCJzcGFuIiwiY29tbWVudHNCb3giLCJjb21tZW50c0xpbmUiLCJpbnB1dEdyb3VwIiwiYnV0dG9uQWRkQ29tbWVudCIsInVwZGF0ZUxvY2FsU3RvcmFnZSIsImV2ZW50Iiwicm93UGFnZUNvbnRhaW5lciIsImZpbmRQcm9wZXJ0eSIsInBhdGgiLCJyZXRyaWV2ZWRPYmplY3QiLCJKU09OIiwicGFyc2UiLCJnZXRJdGVtIiwiYmxvY2tzQ291bnQiLCJzcGxpY2UiLCJpbmRleE9mIiwiYXR0cmlidXRlcyIsInZhbHVlIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInBhZ2VDb250YWluZXJUZW1wIiwicm93QXR0cmlidXRlTmFtZVRlbXAiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5uZXJUZXh0Iiwic2F2ZVRvTG9jYWxTdG9yYWdlIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJPYmplY3QiLCJsb2NhbE9iamVjdCIsImRlbGV0ZUZyb21Mb2NhbFN0b3JhZ2UiLCJkZWxldGVCbG9jayIsInJvd0luZGV4IiwicmVtb3ZlIiwiYXBwcm92ZUN0cmwiLCJwTGlrZXMiLCJsaWtlQ291bnQiLCJzbGljZSIsInJlbW92ZUF0dHJpYnV0ZSIsImRlY2xpbmVDdHJsIiwiYWRkQ29tbWVudCIsImxpc3RHcm91cCIsImNoaWxkTm9kZXMiLCJwYW5lbExpc3ROZXdJdGVtIiwiYnV0dG9uRGVsZXRlQ29tbWVudCIsImZpcnN0Q2hpbGQiLCJjb250YWlucyIsImUiLCJhcHBlbmRDaGlsZCIsImFsZXJ0Iiwib2JqIiwiZmluZENsYXNzIiwiaSIsIndpbmRvdyIsImdldERhdGFGcm9tQVBJIiwiY2FsbGJhY2siLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJyZXNwb25zZVR5cGUiLCJvbmxvYWQiLCJyZXNwb25zZSIsInNlbmQiLCJwYXJlbnQiLCJlbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJsZW5ndGgiLCJtb2RhbEJ0biIsIm1vZGFsQ29udGVudCIsInNhdmVkQmxvY2tzIiwibmV3TW9kYWwiLCJibG9ja051bWJlciIsImJsb2NrQXR0cmlieXRlIiwiY2xvbmVCbG9jayIsImNsb25lTm9kZSIsIiQiLCJtb2RhbCJdLCJtYXBwaW5ncyI6IkFBd0JBLFNBQVNBLFVBQVVDLEdBQ2ZDLGFBQWFDLFFBQ2IsSUFBSUMsRUFBYSxFQUNiQyxFQUFPSixFQUFLSSxLQUNoQkMsY0FBZ0JDLFNBQVNDLEtBQUtDLHVCQUF1QixrQkFBa0IsR0FDdkVKLEVBQUtLLElBQUksU0FBVUwsR0FDZixJQUFJTSxFQUFNQyxXQUFXLE9BQ3JCRCxFQUFJRSxVQUFVQyxJQUFJLE1BQU8scUJBQ3pCSCxFQUFJSSxh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RUFBY0UsR0FDckJLLEVBQUUsY0FBY0MsTUFBTSxXQUd0QjVCLE1BQU0sb0JBR2QsTUFBT0YsR0FDSEUsTUFBTSx1QkFHZHRFLGVBQWUwRixFQUFjaEgiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAqIFRoaXJkIHBhcnR5XHJcbiAqL1xyXG5cclxuXHJcblxyXG4vKlxyXG4gKiBDdXN0b21cclxuICovXHJcblxyXG4vL0FQSVxyXG53aW5kb3cuZ2V0RGF0YUZyb21BUEkgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIHhoci5vcGVuKCdHRVQnLCAnaHR0cHM6Ly9waXhhYmF5LmNvbS9hcGkvP2tleT0yOTgwOTIwLTQ2ZjFhYTI2NGIwMzZmZmM2ZTQ1ZWJhZDAmb3JpZW50YXRpb249dmVydGljYWwmcT1yb2JvdCZtaW5faGVpZ2h0PTUwMCcpO1xyXG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcclxuICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2FsbGJhY2soeGhyLnJlc3BvbnNlKTtcclxuICAgIH07XHJcbiAgICB4aHIuc2VuZCgpO1xyXG59XHJcblxyXG5nZXREYXRhRnJvbUFQSShidWlsQmxvY2spO1xyXG5cclxuLy/Qv9C+0YHRgtGA0L7QtdC90LjQtSDQsdC70L7QutCwXHJcbmZ1bmN0aW9uIGJ1aWxCbG9jayhkYXRhKSB7XHJcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcclxuICAgIHZhciBibG9ja0NvdW50ID0gMTtcclxuICAgIHZhciBoaXRzID0gZGF0YS5oaXRzO1xyXG4gICAgcGFnZUNvbnRhaW5lciA9IGRvY3VtZW50LmJvZHkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncGFnZS1jb250YWluZXInKVswXTtcclxuICAgIGhpdHMubWFwKGZ1bmN0aW9uIChoaXRzKSB7XHJcbiAgICAgICAgdmFyIGRpdiA9IGNyZWF0ZU5vZGUoJ2RpdicpO1xyXG4gICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdyb3cnLCAncm93LXBhZ2VDb250YWluZXInKTtcclxuICAgICAgICBkaXYuc2V0QXR0cmlidXRlKFwiZGF0YS1ibG9ja0NvdW50XCIsIGJsb2NrQ291bnQpO1xyXG4gICAgICAgIGJsb2NrQ291bnQrKztcclxuICAgICAgICB2YXIgYnV0dG9ucyA9IFtcclxuICAgICAgICAgICAgeyB0ZXh0Qm50OiBcIlNhdmVcIiB9LFxyXG4gICAgICAgICAgICB7IHRleHRCbnQ6IFwiQXBwcm92ZVwiIH0sXHJcbiAgICAgICAgICAgIHsgdGV4dEJudDogXCJEZWNsaW5lXCIgfVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgdmFyIGNvbnRhaW5lcnMgPSBbXTtcclxuICAgICAgICB2YXIgY29udGVudCA9IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGV4dENvbnQ6IFwiVGFnczogXCIsXHJcbiAgICAgICAgICAgICAgICBsaW5rQ29udDogJ3RhZ3MnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRleHRDb250OiBcIkxpa2VzOiBcIixcclxuICAgICAgICAgICAgICAgIGxpbmtDb250OiAnbGlrZXMnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRleHRDb250OiBcIkxpbms6IFwiLFxyXG4gICAgICAgICAgICAgICAgbGlua0NvbnQ6ICdwYWdlVVJMJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF07XHJcbiAgICAgICAgY3JlYXRlRGVsZXRlQnV0dG9uKGNvbnRhaW5lcnMpO1xyXG4gICAgICAgIGNyZWF0ZUltZyhoaXRzLnVzZXJJbWFnZVVSTCwgY29udGFpbmVycyk7XHJcbiAgICAgICAgY3JlYXRlQ29udGVudChoaXRzLCBjb250ZW50LCBjb250YWluZXJzKTtcclxuICAgICAgICBjcmVhdGVCdXR0b25zTGlzdChidXR0b25zLCBjb250YWluZXJzKTtcclxuICAgICAgICBjcmVhdGVDb21tZW50c0Jsb2NrKGNvbnRhaW5lcnMpO1xyXG4gICAgICAgIHB1c2hDb250YWluZXJzKGNvbnRhaW5lcnMsIGRpdik7XHJcbiAgICAgICAgYXBwZW5kKHBhZ2VDb250YWluZXIsIGRpdik7XHJcbiAgICB9KTtcclxuICAgIGNvbnRyb2xsZXJzQnRuKHBhZ2VDb250YWluZXIsIGRvY3VtZW50LmJvZHkpO1xyXG4gICAgbW9kYWxWaWV3KGRvY3VtZW50LmJvZHkpO1xyXG59XHJcblxyXG5cclxuLy/RgdC+0LfQtNCw0L3QuNC1INGD0LfQu9CwXHJcbmZ1bmN0aW9uIGNyZWF0ZU5vZGUoZWxlbWVudCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZWxlbWVudCk7XHJcbn1cclxuXHJcbi8v0YPRgdGC0LDQvdC+0LLQu9C10L3QuNC1INGA0L7QtC4g0YHQstGP0LfQtdC5XHJcbndpbmRvdy5hcHBlbmQgPSBmdW5jdGlvbiAocGFyZW50LCBlbCkge1xyXG4gICAgcmV0dXJuIHBhcmVudC5hcHBlbmRDaGlsZChlbCk7XHJcbn1cclxuXHJcbi8v0LrQvtC90YLQtdC50L3QtdGAINC60L3QvtC/0L7QulxyXG5mdW5jdGlvbiBjcmVhdGVCdXR0b25zTGlzdChidXR0b25zLCBjb250YWluZXJzKSB7XHJcbiAgICB2YXIgY29udGFpbmVyID0gY3JlYXRlTm9kZSgnZGl2Jyk7XHJcbiAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY29sLW1kLTInKTtcclxuICAgIHZhciB1bCA9IGNyZWF0ZU5vZGUoJ3VsJyk7XHJcbiAgICBidXR0b25zLm1hcChmdW5jdGlvbiAoYnV0dG9ucykge1xyXG4gICAgICAgIHZhciBidG4gPSBjcmVhdGVOb2RlKCdidXR0b24nKTtcclxuICAgICAgICBidG4udGV4dENvbnRlbnQgPSBidXR0b25zLnRleHRCbnQ7XHJcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2J0bicsICdidG4tcHJpbWFyeScsICdidG4tYmxvY2snKTtcclxuICAgICAgICB2YXIgbGkgPSBjcmVhdGVOb2RlKCdsaScpO1xyXG4gICAgICAgIGFwcGVuZChsaSwgYnRuKTtcclxuICAgICAgICBhcHBlbmQodWwsIGxpKTtcclxuICAgIH0pO1xyXG4gICAgYXBwZW5kKGNvbnRhaW5lciwgdWwpO1xyXG4gICAgY29udGFpbmVycy5wdXNoKGNvbnRhaW5lcik7XHJcbiAgICByZXR1cm4gY29udGFpbmVyO1xyXG59XHJcblxyXG4vL9C60L7QvdGC0LXQudGC0LXRgCDRgSDQutCw0YDRgtC40L3QutC+0LlcclxuZnVuY3Rpb24gY3JlYXRlSW1nKGltZ1NyYywgY29udGFpbmVycykge1xyXG4gICAgdmFyIGNvbnRhaW5lciA9IGNyZWF0ZU5vZGUoJ2RpdicpO1xyXG4gICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2NvbC1tZC00JywgJ2NvbC14cy0xMicsICdjb2wtc20tNicpO1xyXG4gICAgdmFyIGltZyA9IGNyZWF0ZU5vZGUoJ2ltZycpO1xyXG4gICAgaW1nLnNyYyA9IGltZ1NyYztcclxuICAgIGltZy5jbGFzc0xpc3QuYWRkKCdpbWctcmVzcG9uc2l2ZScsICdpbWctY2lyY2xlJywgJ214LWF1dG8nKTtcclxuICAgIGFwcGVuZChjb250YWluZXIsIGltZyk7XHJcbiAgICBjb250YWluZXJzLnB1c2goY29udGFpbmVyKTtcclxuICAgIHJldHVybiBjb250YWluZXI7XHJcbn1cclxuXHJcbi8v0LrQvtC90YLQtdC50L3QtdGAINGBINC60L7QvdGC0LXQvdGC0L7QvFxyXG5mdW5jdGlvbiBjcmVhdGVDb250ZW50KGhpdHMsIGNvbnRlbnQsIGNvbnRhaW5lcnMpIHtcclxuICAgIHZhciBjb250YWluZXIgPSBjcmVhdGVOb2RlKCdkaXYnKTtcclxuICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdjb2wtbWQtNScsICdjb2wteHMtMTInLCAnY29sLXNtLTYnLCAndGV4dC1sZWZ0Jyk7XHJcbiAgICBjb250ZW50Lm1hcChmdW5jdGlvbiAoY29udCkge1xyXG4gICAgICAgIGlmIChjb250LmxpbmtDb250ID09IFwicGFnZVVSTFwiKSB7XHJcbiAgICAgICAgICAgIHZhciBhID0gY3JlYXRlTm9kZSgnYScpO1xyXG4gICAgICAgICAgICBhLnNldEF0dHJpYnV0ZShcInRhcmdldFwiLCBcIl9ibGFua1wiKTtcclxuICAgICAgICAgICAgYS5ocmVmID0gaGl0c1tjb250LmxpbmtDb250XTtcclxuICAgICAgICAgICAgYS50ZXh0Q29udGVudCA9IGhpdHNbY29udC5saW5rQ29udF07XHJcbiAgICAgICAgICAgIGFwcGVuZChjb250YWluZXIsIGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHAgPSBjcmVhdGVOb2RlKCdwJyk7XHJcbiAgICAgICAgICAgIHAuaW5uZXJIVE1MID0gY29udC50ZXh0Q29udCArIGhpdHNbY29udC5saW5rQ29udF07XHJcbiAgICAgICAgICAgIGFwcGVuZChjb250YWluZXIsIHApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KTtcclxuICAgIGNvbnRhaW5lcnMucHVzaChjb250YWluZXIpO1xyXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcclxufVxyXG5cclxuLy/QutC90L7Qv9C60LAg0YPQtNCw0LvQtdC90LjRjyDQsdC70L7QutCwXHJcbmZ1bmN0aW9uIGNyZWF0ZURlbGV0ZUJ1dHRvbihjb250YWluZXJzKSB7XHJcbiAgICB2YXIgY29udGFpbmVyID0gY3JlYXRlTm9kZSgnZGl2Jyk7XHJcbiAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY29sLW1kLTEnLCAnb3JkZXItMTInLCAnY29sLXhzLTInKTtcclxuICAgIHZhciBidG4gPSBjcmVhdGVOb2RlKCdidXR0b24nKTtcclxuICAgIGJ0bi50ZXh0Q29udGVudCA9IFwiWFwiO1xyXG4gICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2J0bicsICdidG4tZGFuZ2VyJyk7XHJcbiAgICBhcHBlbmQoY29udGFpbmVyLCBidG4pO1xyXG4gICAgY29udGFpbmVycy5wdXNoKGNvbnRhaW5lcik7XHJcbiAgICByZXR1cm4gY29udGFpbmVyO1xyXG59XHJcblxyXG4vL9C60L7QvNC10L3RgtCw0YDQuNC4XHJcbmZ1bmN0aW9uIGNyZWF0ZUNvbW1lbnRzQmxvY2soY29udGFpbmVycykge1xyXG4gICAgdmFyIGNvbnRhaW5lciA9IGNyZWF0ZU5vZGUoJ2RpdicpLFxyXG4gICAgICAgIHBhbmVsID0gY3JlYXRlTm9kZSgnZGl2JyksXHJcbiAgICAgICAgcGFuZWxMaXN0ID0gY3JlYXRlTm9kZSgnZGl2JyksXHJcbiAgICAgICAgcGFuZWxIZWFkaW5nID0gY3JlYXRlTm9kZSgnaDQnKSxcclxuICAgICAgICBwYW5lbExpc3RJdGVtMSA9IGNyZWF0ZU5vZGUoJ2EnKSxcclxuICAgICAgICBzcGFuID0gY3JlYXRlTm9kZSgnc3BhbicpLFxyXG4gICAgICAgIGxhYmVsQ29tbWVudCA9IGNyZWF0ZU5vZGUoJ2xhYmVsJyksXHJcbiAgICAgICAgY29tbWVudHNCb3ggPSBjcmVhdGVOb2RlKCd0ZXh0YXJlYScpLFxyXG4gICAgICAgIGNvbW1lbnRzTGluZSA9IGNyZWF0ZU5vZGUoJ2lucHV0JyksXHJcbiAgICAgICAgaW5wdXRHcm91cCA9IGNyZWF0ZU5vZGUoJ2RpdicpLFxyXG4gICAgICAgIGJ1dHRvbkFkZENvbW1lbnQgPSBjcmVhdGVOb2RlKCdidXR0b24nKTtcclxuICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdjb2wtMTInLCAnZm9ybS1ncm91cCcpO1xyXG4gICAgaW5wdXRHcm91cC5jbGFzc0xpc3QuYWRkKCdpbnB1dC1ncm91cCcpO1xyXG4gICAgcGFuZWwuY2xhc3NMaXN0LmFkZCgncGFuZWwnLCAncGFuZWwtZGVmYXVsdCcpO1xyXG4gICAgcGFuZWxIZWFkaW5nLmNsYXNzTGlzdC5hZGQoJ3BhbmVsLWhlYWRpbmcnKTtcclxuICAgIHBhbmVsSGVhZGluZy50ZXh0Q29udGVudCA9IFwiQ29tbWVudHNcIjtcclxuICAgIHBhbmVsTGlzdC5jbGFzc0xpc3QuYWRkKCdsaXN0LWdyb3VwJyk7XHJcbiAgICBwYW5lbExpc3RJdGVtMS5jbGFzc0xpc3QuYWRkKCdsaXN0LWdyb3VwLWl0ZW0nLCAnZmlyc3QtbGlzdC1pdGVtJyk7XHJcbiAgICBwYW5lbExpc3RJdGVtMS50ZXh0Q29udGVudCA9IFwiQWRkIHlvdXIgY29tbWVudHMhXCI7XHJcbiAgICBzcGFuLmNsYXNzTGlzdC5hZGQoXCJiYWRnZVwiKTtcclxuICAgIHNwYW4udGV4dENvbnRlbnQgPSBcIjNcIjtcclxuXHJcbiAgICBidXR0b25BZGRDb21tZW50LmNsYXNzTGlzdC5hZGQoJ2J0bicsICdidG4tY29tbWVudCcpO1xyXG4gICAgY29tbWVudHNCb3guc2V0QXR0cmlidXRlKFwicm93XCIsIFwiMTBcIik7XHJcbiAgICBjb21tZW50c0JveC5jbGFzc0xpc3QuYWRkKCdmb3JtLWNvbnRyb2wnKTtcclxuICAgIGNvbW1lbnRzTGluZS5jbGFzc0xpc3QuYWRkKCdmb3JtLWNvbnRyb2wnKTtcclxuICAgIGJ1dHRvbkFkZENvbW1lbnQudGV4dENvbnRlbnQgPSBcIkFkZCBjb21tZW50XCI7XHJcblxyXG4gICAgYXBwZW5kKHBhbmVsTGlzdCwgcGFuZWxMaXN0SXRlbTEpO1xyXG4gICAgYXBwZW5kKHBhbmVsLCBwYW5lbEhlYWRpbmcpO1xyXG4gICAgYXBwZW5kKHBhbmVsLCBwYW5lbExpc3QpO1xyXG4gICAgYXBwZW5kKGNvbnRhaW5lciwgcGFuZWwpO1xyXG4gICAgYXBwZW5kKGlucHV0R3JvdXAsIGNvbW1lbnRzTGluZSk7XHJcbiAgICBhcHBlbmQoaW5wdXRHcm91cCwgYnV0dG9uQWRkQ29tbWVudCk7XHJcbiAgICBhcHBlbmQoY29udGFpbmVyLCBpbnB1dEdyb3VwKTtcclxuICAgIGNvbnRhaW5lcnMucHVzaChjb250YWluZXIpO1xyXG59XHJcbi8v0LTQvtCx0LDQstC70LXQvdC40LUg0LrQvtC90YLQtdC50L3QtdGA0L7QsiDQsiBkaXYucm93XHJcbmZ1bmN0aW9uIHB1c2hDb250YWluZXJzKGNvbnRhaW5lcnMsIGRpdikge1xyXG4gICAgY29udGFpbmVycy5tYXAoZnVuY3Rpb24gKGNvbnQpIHtcclxuICAgICAgICBhcHBlbmQoZGl2LCBjb250KTtcclxuICAgIH0pO1xyXG59O1xyXG4vL9GE0YPQvdC60YbQuNC+0L3QsNC7INC60L3QvtC/0L7QulxyXG53aW5kb3cuY29udHJvbGxlcnNCdG4gPSBmdW5jdGlvbiAoY29udGFpbmVyLCBib2R5KSB7XHJcbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYnRuXCIpKSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQudGV4dENvbnRlbnQgPT0gXCJBcHByb3ZlXCIpIHtcclxuICAgICAgICAgICAgICAgIGFwcHJvdmVDdHJsKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC50YXJnZXQudGV4dENvbnRlbnQgPT0gXCJEZWNsaW5lXCIpIHtcclxuICAgICAgICAgICAgICAgIGRlY2xpbmVDdHJsKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC50YXJnZXQudGV4dENvbnRlbnQgPT0gXCJYXCIpIHtcclxuICAgICAgICAgICAgICAgIC8v0YPQtNCw0LvQtdC90LjQtSDQsdC70L7QutCwICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUxvY2FsU3RvcmFnZShldmVudCwgYm9keSk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7IH1cclxuICAgICAgICAgICAgICAgIGRlbGV0ZUJsb2NrKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC50YXJnZXQudGV4dENvbnRlbnQgPT0gXCJBZGQgY29tbWVudFwiKSB7XHJcbiAgICAgICAgICAgICAgICAvL9C00L7QsdCw0LLQu9C10L3QuNC1INC60L7QvNC10L3RgtCw0YDQuNGPICBcclxuICAgICAgICAgICAgICAgIGFkZENvbW1lbnQoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LnRhcmdldC50ZXh0Q29udGVudCA9PSBcIkRlbGV0ZSBjb21tZW50XCIpIHtcclxuICAgICAgICAgICAgICAgIC8v0YPQtNCw0LvQtdC90LjQtSDQutC+0LzQtdC90YLQsNGA0LjRj1xyXG4gICAgICAgICAgICAgICAgZXZlbnQucGF0aFsxXS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC50YXJnZXQudGV4dENvbnRlbnQgPT0gXCJTYXZlXCIpIHtcclxuICAgICAgICAgICAgICAgIC8vY9C+0YXRgNGA0LDQvdC10L3QuNC1INCx0LvQvtC60LBcclxuICAgICAgICAgICAgICAgIHNhdmVUb0xvY2FsU3RvcmFnZShldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQudGFyZ2V0LnRleHRDb250ZW50ID09IFwiRGVsZXRlXCIpIHtcclxuICAgICAgICAgICAgICAgIC8v0YPQtNCw0LvQtdC90LjQtSDQsdC70L7QutCwXHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQucGF0aFs1XS5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsLWJvZHknKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnBhdGhbMF0uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZUZyb21Mb2NhbFN0b3JhZ2UoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGJvZHkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm1vZGFsLWJ0blwiKVswXS50ZXh0Q29udGVudCA9IFwiTGF1bmNoIG1vZGFsIFwiICsgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9jYWxPYmplY3QnKSkuYmxvY2tzQ291bnQubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBib2R5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtb2RhbC1idG5cIilbMF0udGV4dENvbnRlbnQgPSBcIkxhdW5jaCBtb2RhbCAwXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8v0L7QsdC90L7QstC70LXQvdC40LUgTG9jYWwgU3RvcmFnZSDQv9C+0YHQu9C1INGD0LTQsNC70LXQvdC40Y8g0LHQu9C+0LrQsFxyXG5mdW5jdGlvbiB1cGRhdGVMb2NhbFN0b3JhZ2UoZXZlbnQsIGJvZHkpIHtcclxuICAgIHZhciByb3dQYWdlQ29udGFpbmVyID0gZmluZFByb3BlcnR5KGV2ZW50LnBhdGgsICdyb3ctcGFnZUNvbnRhaW5lcicpO1xyXG4gICAgdmFyIHJldHJpZXZlZE9iamVjdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvY2FsT2JqZWN0JykpO1xyXG4gICAgcmV0cmlldmVkT2JqZWN0LmJsb2Nrc0NvdW50LnNwbGljZShyZXRyaWV2ZWRPYmplY3QuYmxvY2tzQ291bnQuaW5kZXhPZihldmVudC5wYXRoW3Jvd1BhZ2VDb250YWluZXJdLmF0dHJpYnV0ZXNbMV0udmFsdWUpLCAxKTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsb2NhbE9iamVjdCcsIEpTT04uc3RyaW5naWZ5KHJldHJpZXZlZE9iamVjdCkpO1xyXG4gICAgdmFyIHBhZ2VDb250YWluZXJUZW1wID0gYm9keS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwicGFnZS1jb250YWluZXJcIilbMF0sXHJcbiAgICAgICAgcm93QXR0cmlidXRlTmFtZVRlbXAgPSBcImRpdltkYXRhLWJsb2NrQ291bnQ9J1wiICsgZXZlbnQucGF0aFtyb3dQYWdlQ29udGFpbmVyXS5hdHRyaWJ1dGVzWzFdLnZhbHVlICsgXCInXVwiLFxyXG4gICAgICAgIHJvd1RlbXAgPSBwYWdlQ29udGFpbmVyVGVtcC5xdWVyeVNlbGVjdG9yQWxsKHJvd0F0dHJpYnV0ZU5hbWVUZW1wKVswXSxcclxuICAgICAgICBzYXZlQnRuID0gcm93VGVtcC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYnRuLWJsb2NrXCIpWzBdO1xyXG4gICAgc2F2ZUJ0bi5pbm5lclRleHQgPSBcIlNhdmVcIjtcclxufVxyXG5cclxuLy/RhNGD0L3QutGG0LjQvtC90LDQuyDQutC90L7Qv9C60LggXCJTYXZlXCJcclxuZnVuY3Rpb24gc2F2ZVRvTG9jYWxTdG9yYWdlKGV2ZW50KSB7XHJcbiAgICB2YXIgYnRuTW9kYWwgPSBldmVudC5wYXRoWzZdLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKTtcclxuICAgIGV2ZW50LnBhdGhbMF0uaW5uZXJUZXh0ID0gXCJEZWxldGVcIjtcclxuICAgIHZhciByZXRyaWV2ZWRPYmplY3QgPSBuZXcgT2JqZWN0KCk7XHJcbiAgICBpZiAoIWxvY2FsU3RvcmFnZS5sb2NhbE9iamVjdCkge1xyXG4gICAgICAgIHJldHJpZXZlZE9iamVjdCA9IHtcclxuICAgICAgICAgICAgYmxvY2tzQ291bnQ6IFtdXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGxvY2FsU3RvcmFnZS5sb2NhbE9iamVjdCkge1xyXG4gICAgICAgIHJldHJpZXZlZE9iamVjdCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvY2FsT2JqZWN0JykpO1xyXG4gICAgfVxyXG4gICAgcmV0cmlldmVkT2JqZWN0LmJsb2Nrc0NvdW50LnB1c2goZXZlbnQucGF0aFs0XS5hdHRyaWJ1dGVzWzFdLnZhbHVlKTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsb2NhbE9iamVjdCcsIEpTT04uc3RyaW5naWZ5KHJldHJpZXZlZE9iamVjdCkpO1xyXG59XHJcblxyXG4vL9GE0YPQvdC60YbQuNC+0L3QsNC7INC60L3QvtC/0LrQuCBcIkRlbGV0ZVwiXHJcbmZ1bmN0aW9uIGRlbGV0ZUZyb21Mb2NhbFN0b3JhZ2UoZXZlbnQpIHtcclxuICAgIHZhciByb3dQYWdlQ29udGFpbmVyID0gZmluZFByb3BlcnR5KGV2ZW50LnBhdGgsICdyb3ctcGFnZUNvbnRhaW5lcicpO1xyXG4gICAgZXZlbnQucGF0aFswXS5pbm5lclRleHQgPSBcIlNhdmVcIjtcclxuICAgIHZhciByZXRyaWV2ZWRPYmplY3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2NhbE9iamVjdCcpKTtcclxuICAgIHJldHJpZXZlZE9iamVjdC5ibG9ja3NDb3VudC5zcGxpY2UocmV0cmlldmVkT2JqZWN0LmJsb2Nrc0NvdW50LmluZGV4T2YoZXZlbnQucGF0aFtyb3dQYWdlQ29udGFpbmVyXS5hdHRyaWJ1dGVzWzFdLnZhbHVlKSwgMSk7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbG9jYWxPYmplY3QnLCBKU09OLnN0cmluZ2lmeShyZXRyaWV2ZWRPYmplY3QpKTtcclxufVxyXG5cclxuLy/RhNGD0L3QutGG0LjQvtC90LDQuyDQutC90L7Qv9C60LggXCJYXCJcclxuZnVuY3Rpb24gZGVsZXRlQmxvY2soZXZlbnQpIHtcclxuICAgIHZhciByb3dJbmRleCA9IGZpbmRQcm9wZXJ0eShldmVudC5wYXRoLCAncm93LXBhZ2VDb250YWluZXInKTtcclxuICAgIGV2ZW50LnBhdGhbcm93SW5kZXhdLnJlbW92ZSgpO1xyXG59XHJcblxyXG4vL9GE0YPQvdC60YbQuNC+0L3QsNC7INC60L3QvtC/0LrQuCBcIkFwcHJvdmVcIlxyXG5mdW5jdGlvbiBhcHByb3ZlQ3RybChldmVudCkge1xyXG4gICAgdmFyIGJ1dHRvbnMgPSBldmVudC5wYXRoWzJdLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYnV0dG9uXCIpLFxyXG4gICAgICAgIHBMaWtlcyA9IGV2ZW50LnBhdGhbNF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJwXCIpLFxyXG4gICAgICAgIGxpa2VDb3VudCA9IHBMaWtlc1sxXS50ZXh0Q29udGVudC5zbGljZSg2LCA5KTtcclxuICAgIGJ1dHRvbnNbMV0uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKTtcclxuICAgIGJ1dHRvbnNbMl0ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICBldmVudC5wYXRoWzRdLmNsYXNzTGlzdC5hZGQoXCJibG9ja2xpdGVHcmVlblwiKTtcclxuICAgIGV2ZW50LnBhdGhbNF0uY2xhc3NMaXN0LnJlbW92ZShcImJsb2NrbGl0ZVJlZFwiKTtcclxuICAgIGxpa2VDb3VudCsrO1xyXG4gICAgcExpa2VzWzFdLmlubmVySFRNTCA9IFwiTGlrZXM6IFwiICsgbGlrZUNvdW50O1xyXG59XHJcblxyXG4vL9GE0YPQvdC60YbQuNC+0L3QsNC7INC60L3QvtC/0LrQuCBcIkRlY2xpbmVcIlxyXG5mdW5jdGlvbiBkZWNsaW5lQ3RybChldmVudCkge1xyXG4gICAgdmFyIGJ1dHRvbnMgPSBldmVudC5wYXRoWzJdLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYnV0dG9uXCIpLFxyXG4gICAgICAgIHBMaWtlcyA9IGV2ZW50LnBhdGhbNF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJwXCIpLFxyXG4gICAgICAgIGxpa2VDb3VudCA9IHBMaWtlc1sxXS50ZXh0Q29udGVudC5zbGljZSg2LCA5KTtcclxuICAgIGJ1dHRvbnNbMl0uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKTtcclxuICAgIGJ1dHRvbnNbMV0ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICBldmVudC5wYXRoWzRdLmNsYXNzTGlzdC5hZGQoXCJibG9ja2xpdGVSZWRcIik7XHJcbiAgICBldmVudC5wYXRoWzRdLmNsYXNzTGlzdC5yZW1vdmUoXCJibG9ja2xpdGVHcmVlblwiKTtcclxuICAgIGxpa2VDb3VudC0tO1xyXG4gICAgcExpa2VzWzFdLmlubmVySFRNTCA9IFwiTGlrZXM6IFwiICsgbGlrZUNvdW50O1xyXG59XHJcblxyXG4vL9C00L7QsdCw0LLQu9C10L3QuNC1INC60L7QvNC10L3RgtCw0YDQuNC10LJcclxuZnVuY3Rpb24gYWRkQ29tbWVudChldmVudCkge1xyXG4gICAgdmFyIHJvd0luZGV4ID0gZmluZFByb3BlcnR5KGV2ZW50LnBhdGgsICdyb3ctcGFnZUNvbnRhaW5lcicpO1xyXG4gICAgdmFyIGxpbmVDb21tZW50ID0gZXZlbnQucGF0aFtyb3dJbmRleF0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImZvcm0tY29udHJvbFwiKVswXTtcclxuICAgIGlmIChsaW5lQ29tbWVudC52YWx1ZSAhPSBcIlwiKSB7XHJcbiAgICAgICAgdmFyIGxpc3RHcm91cCA9IGV2ZW50LnBhdGhbMl0uY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzFdLFxyXG4gICAgICAgICAgICBwYW5lbExpc3ROZXdJdGVtID0gY3JlYXRlTm9kZSgnYScpLFxyXG4gICAgICAgICAgICBidXR0b25BZGRDb21tZW50ID0gY3JlYXRlTm9kZSgnYnV0dG9uJyksXHJcbiAgICAgICAgICAgIGJ1dHRvbkRlbGV0ZUNvbW1lbnQgPSBjcmVhdGVOb2RlKCdidXR0b24nKTtcclxuICAgICAgICBidXR0b25EZWxldGVDb21tZW50LnRleHRDb250ZW50ID0gXCJEZWxldGUgY29tbWVudFwiO1xyXG4gICAgICAgIGJ1dHRvbkRlbGV0ZUNvbW1lbnQuY2xhc3NMaXN0LmFkZChcImRlbGV0ZUJ0blwiLCBcImJ0blwiKTtcclxuICAgICAgICBidXR0b25BZGRDb21tZW50LmNsYXNzTGlzdC5hZGQoJ2J0bicpO1xyXG4gICAgICAgIHBhbmVsTGlzdE5ld0l0ZW0uY2xhc3NMaXN0LmFkZCgnbGlzdC1ncm91cC1pdGVtJyk7XHJcbiAgICAgICAgcGFuZWxMaXN0TmV3SXRlbS50ZXh0Q29udGVudCA9IGV2ZW50LnBhdGhbMV0uZmlyc3RDaGlsZC52YWx1ZTtcclxuICAgICAgICBhcHBlbmQocGFuZWxMaXN0TmV3SXRlbSwgYnV0dG9uRGVsZXRlQ29tbWVudCk7XHJcbiAgICAgICAgZXZlbnQucGF0aFsxXS5maXJzdENoaWxkLnZhbHVlID0gXCJcIjtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQucGF0aFsyXS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMV0uY2hpbGROb2Rlc1swXS5jbGFzc0xpc3QuY29udGFpbnMoJ2ZpcnN0LWxpc3QtaXRlbScpKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5wYXRoWzJdLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7IH1cclxuICAgICAgICBsaXN0R3JvdXAuYXBwZW5kQ2hpbGQocGFuZWxMaXN0TmV3SXRlbSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBhbGVydChcIllvdXIgY29tbWVudCBpcyBlbXB0eSFcIik7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8v0L3QsNGF0L7QttC00LXQvdC40LUg0LrQu9Cw0YHRgdCwXHJcbmZ1bmN0aW9uIGZpbmRQcm9wZXJ0eShvYmosIGZpbmRDbGFzcykge1xyXG4gICAgZm9yICh2YXIgaSBpbiBvYmopIHtcclxuICAgICAgICBpZiAob2JqW2ldLmNsYXNzTGlzdC5jb250YWlucyhmaW5kQ2xhc3MpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vL9GE0YPQvdC60YbQuNC+0L3QsNC7INC80L7QtNCw0LvRjNC90L7Qs9C+INC+0LrQvdCwXHJcbndpbmRvdy5tb2RhbFZpZXcgPSBmdW5jdGlvbiAoYm9keSkge1xyXG4gICAgdmFyIG1vZGFsQnRuID0gYm9keS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibW9kYWwtYnRuXCIpO1xyXG4gICAgYm9keS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIHggPSBib2R5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtb2RhbC1idG5cIilbMF07XHJcbiAgICAgICAgICAgIHgudGV4dENvbnRlbnQgPSBcIkxhdW5jaCBtb2RhbCBcIiArIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvY2FsT2JqZWN0JykpLmJsb2Nrc0NvdW50Lmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHsgfVxyXG4gICAgfSk7XHJcbiAgICB2YXIgbW9kYWxDb250ZW50ID0gYm9keS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibW9kYWwtY29udGVudFwiKVswXTtcclxuICAgIG1vZGFsQnRuWzBdLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgbW9kYWxWaWV3ID0gYm9keS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibW9kYWwtYm9keVwiKVswXSxcclxuICAgICAgICAgICAgc2F2ZWRCbG9ja3MgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2NhbE9iamVjdCcpKSxcclxuICAgICAgICAgICAgbmV3TW9kYWwgPSBjcmVhdGVOb2RlKFwiZGl2XCIpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGJvZHkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm1vZGFsLWJvZHlcIilbMF0ucmVtb3ZlKCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyB9XHJcbiAgICAgICAgbmV3TW9kYWwuY2xhc3NMaXN0LmFkZCgnbW9kYWwtYm9keScpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChzYXZlZEJsb2Nrcy5ibG9ja3NDb3VudC5sZW5ndGggIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgc2F2ZWRCbG9ja3MuYmxvY2tzQ291bnQubWFwKGZ1bmN0aW9uIChibG9ja051bWJlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBibG9ja0F0dHJpYnl0ZSA9IFwiZGl2W2RhdGEtYmxvY2tDb3VudD0nXCIgKyBibG9ja051bWJlciArIFwiJ11cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sgPSBib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoYmxvY2tBdHRyaWJ5dGUpWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9uZUJsb2NrID0gYmxvY2suY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZChuZXdNb2RhbCwgY2xvbmVCbG9jayk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGFwcGVuZChtb2RhbENvbnRlbnQsIG5ld01vZGFsKTtcclxuICAgICAgICAgICAgICAgICQoJyNtb2RhbFZpZXcnKS5tb2RhbCgndG9nZ2xlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIk5vIHNhdmVkIGJsb2NrcyFcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgYWxlcnQoXCJObyBzYXZlZCBibG9ja3MhXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgY29udHJvbGxlcnNCdG4obW9kYWxDb250ZW50LCBib2R5KTtcclxufSJdfQ==
